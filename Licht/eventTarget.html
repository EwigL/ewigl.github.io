<!DOCTYPE html>
<html lang="zh-cn">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>触发对象target与事件冒泡</title>
    <style>
        button {
            width: auto;
            font-size: 18px;
            height: 32px;
            outline: none;
            border-radius: 16px;
        }

        div {
            padding: 32px;
        }

        #d0 {
            background-color: lightslategray;
        }

        #d1 {
            background-color: limegreen;
        }

        #d2 {
            background-color: maroon;
        }
    </style>
    <script>
        /* 
        target(目标对象、触发对象)：
            描述此事件由谁触发。
        IE8以下不兼容：
            window.event.srcElement;
        
        this关键字永远指向当前函数主人；

        事件冒泡：
            由内向外逐级触发
        事件捕获：
            由外向内触发

        阻止事件冒泡：
        事件对象的属性和方法：
            cancelBubble
            stopPropagation()

        */

        window.onload = function () {
            var oButton0 = document.getElementById("btn0");
            var oButton1 = document.getElementById("btn1");
            var oP0 = document.getElementById("p0");
            var aDivs = document.getElementsByTagName("div");

            document.body.onclick = function (ev) {
                var e = ev || window.event;
                var target = e.target || window.event.srcElement;
                oP0.innerHTML = "tagName:" + this.tagName + "<br/>" + "target(触发对象)：" + target.id;
            }

            for (var i = 0; i < aDivs.length; i++) {
                aDivs[i].onclick = function (ev) {
                    var e = ev || window.event;
                    alert(this.id);
                    // e.cancelBubble = true;
                    // e.stopPropagation();
                    stopBubble(e);
                }
            }

            //封装跨浏览器兼容阻止事件冒泡函数
            function stopBubble(e) {
                /* 
                if (e.stopPropagation) {
                    e.stopPropagation();
                } else {
                    e.cancelBubble = true;
                } */
                e.stopPropagation ? e.stopPropagation() : e.cancelBubble = true;
            }

        }
    </script>

</head>

<body style="text-align: center;">
    <button id="btn0">按钮一</button>
    <button id="btn1">按纽二</button>
    <p id="p0"></p>
    <div id="d0">0
        <div id="d1">1
            <div id="d2">2</div>
        </div>
    </div>

</body>

</html>